
/*!50001 ALTER ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `abononuevo` AS ( SELECT `bdabono`.`id`                  AS `id`, `bdabono`.`fecha`               AS `fecha`, `bdterceros`.`nombre`           AS `nombre`, `bdterceros`.`id`               AS `cliente`, `bdabono`.`numFactura`          AS `numFactura`, `bdabono`.`totalFactura`        AS `totalFactura`, `bdabono`.`comprobante`         AS `comprobante`, `bdabono`.`abonoActual`         AS `abonoActual`, `bdabono`.`abonoLetras`         AS `abonoLetras`, `bdabono`.`abonosAnteriores`    AS `abonosAnteriores`, IF(`bdabonos`.`cheque` IS NULL,0,`bdabonos`.`cheque`) AS `cheque`, IF(`bdabonos`.`targeta` IS NULL,0,`bdabonos`.`targeta`) AS `targeta`, IF(`bdabonos`.`efectivo` IS NULL,0,`bdabonos`.`efectivo`) AS `efectivo`, IF(`bdabonos`.`nc` IS NULL,0,`bdabonos`.`nc`) AS `nc`, IF(`bdabonos`.`rtIva` IS NULL,0,`bdabonos`.`rtIva`) AS `rtIva`, IF(`bdabonos`.`rtIca` IS NULL,0,`bdabonos`.`rtIca`) AS `rtIca`, IF(`bdabonos`.`rtFuente` IS NULL,0,`bdabonos`.`rtFuente`) AS `rtFuente`, IF(`bdabonos`.`otros` IS NULL,0,`bdabonos`.`otros`) AS `otros`, IF(`bdabonos`.`descuentos` IS NULL,0,`bdabonos`.`descuentos`) AS `descuentos`, IF(`bdabonogeneral`.`AbonoGeneral` IS NULL,0,`bdabonogeneral`.`AbonoGeneral`) AS `abonoGeneral`, IF(`bdabonogeneral`.`saldoTotal` IS NULL,0,`bdabonogeneral`.`saldoTotal`) AS `saldoTotalGeneral`, IF(`bdabonogeneral`.`valor` IS NULL,0,`bdabonogeneral`.`valor`) AS `valorGeneral`, `bdabonogeneral`.`enLetra`      AS `enLetra`, IF(`repcart`.`valor` IS NULL,0,`bdabonogeneral`.`saldoTotal` - `repcart`.`valor`) AS `saldoFaltante`, `bdabono`.`abono`               AS `abono`, SUBSTR(`bdabono`.`abono`,7)     AS `abono2` FROM (((((`bdabono` LEFT JOIN `bdabonos` ON (`bdabonos`.`factura` = `bdabono`.`abono`)) LEFT JOIN `bdterceros` ON (`bdabono`.`cliente` = `bdterceros`.`idSistema`)) LEFT JOIN `bdabonogeneral` ON (`bdabono`.`abono` = `bdabonogeneral`.`abono`)) LEFT JOIN `bdcxc` ON (`bdcxc`.`factura2` = `bdabonogeneral`.`AbonoGeneral`)) LEFT JOIN `repcart` ON (`repcart`.`fact` = `bdabonogeneral`.`AbonoGeneral`)) GROUP BY `bdabono`.`fecha`,`bdterceros`.`nombre`,`bdterceros`.`id`,`bdabono`.`numFactura`,`bdabono`.`totalFactura`,`bdabono`.`comprobante`,`bdabono`.`abonoActual`,`bdabono`.`abonoLetras`,`bdabono`.`abonosAnteriores`,`bdabonos`.`cheque`,`bdabonos`.`targeta`,`bdabonos`.`efectivo`,`bdabonos`.`nc`,`bdabonos`.`rtIva`,`bdabonos`.`rtIca`,`bdabonos`.`rtFuente`,`bdabonos`.`otros`,`bdabonos`.`descuentos`,`bdabonogeneral`.`AbonoGeneral`,`bdabonogeneral`.`saldoTotal`,`bdabonogeneral`.`valor`,IF(`repcart`.`valor` IS NULL,0,`bdabonogeneral`.`saldoTotal` - `repcart`.`valor`),`bdabono`.`abono`,SUBSTR(`bdabono`.`abono`,7)) */;